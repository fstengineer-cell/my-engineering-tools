<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometry & Trig Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        body {
            font-family: 'Prompt', sans-serif;
            background-color: #F3F4F6;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- Input Styling --- */
        .geo-input {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background-color: #E5E7EB; /* Gray-200 to stand out on white */
            border: none;
            outline: none;
            text-align: center;
            font-weight: 600;
            color: #1F2937;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            padding: 0 4px;
            width: 100%;
            height: 100%;
            font-size: 0.95rem;
        }

        .geo-input:hover { background-color: #D1D5DB; }

        .geo-input:focus,
        .geo-input.has-value {
            background-color: transparent; /* ปรับเป็นโปร่งใส */
            backdrop-filter: none;
            box-shadow: none;
            color: var(--theme-color, #4F46E5); /* Dynamic color */
            font-weight: 700; /* เพิ่มความหนาตัวอักษรให้อ่านง่ายขึ้นเมื่อไม่มีพื้นหลัง */
        }

        .geo-input::placeholder { color: #9CA3AF; font-weight: 400; font-size: 0.8rem;}

        /* --- Degree Symbol --- */
        .degree-symbol {
            position: absolute; right: 4px; top: 2px;
            color: #9CA3AF; font-size: 0.8rem; pointer-events: none;
        }
        .geo-input:focus ~ .degree-symbol,
        .geo-input.has-value ~ .degree-symbol { color: var(--theme-color, #4F46E5); }

        /* --- Graphic Container --- */
        .graphic-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            aspect-ratio: 4/3;
            margin: 0 auto;
        }

        .input-pos {
            position: absolute;
            width: 60px; height: 32px;
            display: flex; align-items: center; justify-content: center;
            z-index: 10;
            transform: translate(-50%, -50%);
        }

        /* --- SVG Styling --- */
        .shape-stroke {
            fill: none; 
            stroke-width: 2.5;
            stroke-linecap: round; stroke-linejoin: round;
            transition: stroke 0.3s;
        }
        .shape-fill { 
            opacity: 0.3; 
            transition: fill 0.3s;
        }
        .shape-dash { stroke-dasharray: 4, 4; stroke-width: 1.5; opacity: 0.6;}

        /* Hide Number Arrows */
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { -moz-appearance: textfield; }

        /* --- Tab Navigation --- */
        .nav-btn {
            transition: all 0.2s;
            opacity: 0.6;
            border-bottom: 3px solid transparent;
        }
        .nav-btn:hover { opacity: 0.8; background-color: #F9FAFB; }
        .nav-btn.active {
            opacity: 1;
            background-color: #EFF6FF;
        }
        
        /* Shape Sections Visibility */
        .shape-section { display: none; }
        .shape-section.active { display: block; animation: fadeIn 0.4s ease-out; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Result Card */
        .result-card {
            background: white; border-radius: 12px; padding: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05); border: 1px solid #F3F4F6;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col md:flex-row items-center justify-center p-4">

    <div class="w-full max-w-6xl bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col md:flex-row min-h-[600px]">
        
        <!-- Sidebar / Topbar Navigation -->
        <nav class="bg-gray-50 border-r border-gray-200 md:w-24 flex md:flex-col flex-row justify-between md:justify-start items-center p-2 md:py-6 overflow-x-auto">
            <div class="mb-0 md:mb-6 p-2 hidden md:block">
                <i class="ph-fill ph-shapes text-3xl text-gray-400"></i>
            </div>
            
            <button onclick="switchShape('triangle')" id="btn-triangle" class="nav-btn active p-3 md:mb-4 flex flex-col items-center min-w-[60px] rounded-xl" title="สามเหลี่ยมมุมฉาก">
                <i class="ph ph-triangle text-2xl mb-1 text-indigo-500"></i>
                <span class="text-[10px] font-medium text-gray-600">Trig</span>
            </button>
            <button onclick="switchShape('circle')" id="btn-circle" class="nav-btn p-3 md:mb-4 flex flex-col items-center min-w-[60px] rounded-xl" title="วงกลม">
                <i class="ph ph-circle text-2xl mb-1 text-pink-500"></i>
                <span class="text-[10px] font-medium text-gray-600">Circle</span>
            </button>
            <button onclick="switchShape('cylinder')" id="btn-cylinder" class="nav-btn p-3 md:mb-4 flex flex-col items-center min-w-[60px] rounded-xl" title="ทรงกระบอก">
                <i class="ph ph-cylinder text-2xl mb-1 text-emerald-500"></i>
                <span class="text-[10px] font-medium text-gray-600">Cylin</span>
            </button>
            <button onclick="switchShape('cone')" id="btn-cone" class="nav-btn p-3 md:mb-4 flex flex-col items-center min-w-[60px] rounded-xl" title="กรวย">
                <i class="ph ph-cone text-2xl mb-1 text-orange-500"></i>
                <span class="text-[10px] font-medium text-gray-600">Cone</span>
            </button>
            <button onclick="switchShape('sphere')" id="btn-sphere" class="nav-btn p-3 flex flex-col items-center min-w-[60px] rounded-xl" title="ทรงกลม">
                <i class="ph ph-basketball text-2xl mb-1 text-cyan-500"></i>
                <span class="text-[10px] font-medium text-gray-600">Sphere</span>
            </button>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-1 flex flex-col md:flex-row">
            
            <!-- Graphic & Input Zone -->
            <div class="w-full md:w-2/3 p-4 sm:p-8 relative flex flex-col items-center justify-center bg-white transition-colors duration-500" id="main-bg">
                
                <div class="w-full flex justify-between items-start mb-6">
                    <div>
                        <h1 id="header-title" class="text-2xl font-bold text-gray-800 transition-colors">Triangle (Trig)</h1>
                        <p id="header-desc" class="text-gray-400 text-sm">กรอก 2 ค่า (ด้าน/มุม) เพื่อคำนวณ</p>
                    </div>
                    <button onclick="resetAll()" class="p-2 rounded-full hover:bg-gray-100 text-gray-400" title="ล้างค่า">
                        <i class="ph ph-arrow-counter-clockwise text-xl"></i>
                    </button>
                </div>

                <div class="graphic-container select-none">
                    <svg viewBox="0 0 400 300" class="w-full h-full drop-shadow-sm" id="main-svg">
                        <!-- SVG content will be injected/controlled here -->
                    </svg>
                    
                    <!-- INPUTS: TRIANGLE -->
                    <div id="inputs-triangle" class="shape-section active w-full h-full absolute top-0 left-0">
                        <div class="input-pos" style="left: 6%; top: 45%;"> <!-- a -->
                            <input type="number" id="tri-a" class="geo-input" placeholder="a">
                        </div>
                        <div class="input-pos" style="left: 50%; top: 94%;"> <!-- b -->
                            <input type="number" id="tri-b" class="geo-input" placeholder="b">
                        </div>
                        <div class="input-pos" style="left: 55%; top: 40%;"> <!-- c -->
                            <input type="number" id="tri-c" class="geo-input" placeholder="c">
                        </div>
                        <div class="input-pos" style="left: 15%; top: 10%;"> <!-- A -->
                            <input type="number" id="tri-A" class="geo-input" placeholder="A">
                            <span class="degree-symbol">°</span>
                        </div>
                        <div class="input-pos" style="left: 92%; top: 86%;"> <!-- B -->
                            <input type="number" id="tri-B" class="geo-input" placeholder="B">
                            <span class="degree-symbol">°</span>
                        </div>
                    </div>

                    <!-- INPUTS: CIRCLE -->
                    <div id="inputs-circle" class="shape-section w-full h-full absolute top-0 left-0">
                        <div class="input-pos" style="left: 65%; top: 37%;"> <!-- r -->
                            <input type="number" id="cir-r" class="geo-input" placeholder="r">
                        </div>
                    </div>

                    <!-- INPUTS: CYLINDER -->
                    <div id="inputs-cylinder" class="shape-section w-full h-full absolute top-0 left-0">
                        <div class="input-pos" style="left: 65%; top: 13%;"> <!-- r -->
                            <input type="number" id="cyl-r" class="geo-input" placeholder="r">
                        </div>
                        <div class="input-pos" style="left: 90%; top: 50%;"> <!-- h -->
                            <input type="number" id="cyl-h" class="geo-input" placeholder="h">
                        </div>
                    </div>

                    <!-- INPUTS: CONE -->
                    <div id="inputs-cone" class="shape-section w-full h-full absolute top-0 left-0">
                        <div class="input-pos" style="left: 63%; top: 88%;"> <!-- r -->
                            <input type="number" id="cone-r" class="geo-input" placeholder="r">
                        </div>
                        <div class="input-pos" style="left: 40%; top: 60%;"> <!-- h -->
                            <input type="number" id="cone-h" class="geo-input" placeholder="h">
                        </div>
                        <div class="input-pos" style="left: 76%; top: 50%;"> <!-- l (slant) -->
                            <input type="number" id="cone-l" class="geo-input" placeholder="l">
                        </div>
                    </div>

                    <!-- INPUTS: SPHERE -->
                    <div id="inputs-sphere" class="shape-section w-full h-full absolute top-0 left-0">
                        <div class="input-pos" style="left: 65%; top: 49.5%;"> <!-- r -->
                            <input type="number" id="sph-r" class="geo-input" placeholder="r">
                        </div>
                    </div>

                </div>
            </div>

            <!-- Results Panel -->
            <div class="w-full md:w-1/3 bg-gray-50 border-l border-gray-100 p-6 flex flex-col">
                <h2 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-4">ผลลัพธ์ (Results)</h2>
                
                <div id="results-area" class="space-y-3">
                    <!-- Dynamic Results Injected Here -->
                    <div class="text-center text-gray-400 mt-10 text-sm">กรอกข้อมูลเพื่อเริ่มคำนวณ</div>
                </div>
            </div>

        </main>
    </div>

    <!-- Javascript Logic -->
    <script>
        // --- DATA & CONFIG ---
        // Color Themes
        const themes = {
            triangle: { stroke: '#4F46E5', fill: '#E0E7FF', text: 'text-indigo-600', border: 'border-indigo-200' }, // Indigo
            circle:   { stroke: '#DB2777', fill: '#FCE7F3', text: 'text-pink-600', border: 'border-pink-200' },   // Pink
            cylinder: { stroke: '#059669', fill: '#D1FAE5', text: 'text-emerald-600', border: 'border-emerald-200' }, // Emerald
            cone:     { stroke: '#EA580C', fill: '#FFEDD5', text: 'text-orange-600', border: 'border-orange-200' }, // Orange
            sphere:   { stroke: '#0891B2', fill: '#CFFAFE', text: 'text-cyan-600', border: 'border-cyan-200' },   // Cyan
        };

        const svgs = {
            triangle: `
                <path d="M 60,40 L 60,260 L 340,260 Z" class="shape-fill" style="fill: ${themes.triangle.fill}" />
                <path d="M 60,40 L 60,260 L 340,260 Z" class="shape-stroke" style="stroke: ${themes.triangle.stroke}" />
                <path d="M 60,240 L 80,240 L 80,260" fill="none" stroke="#9CA3AF" stroke-width="2" />
            `,
            circle: `
                <circle cx="200" cy="150" r="100" class="shape-fill" style="fill: ${themes.circle.fill}" />
                <circle cx="200" cy="150" r="100" class="shape-stroke" style="stroke: ${themes.circle.stroke}" />
                <line x1="200" y1="150" x2="300" y2="150" class="shape-stroke" style="stroke: ${themes.circle.stroke}" />
                <circle cx="200" cy="150" r="3" fill="#374151" />
                <text x="240" y="140" fill="#6B7280" font-size="14">Radius</text>
            `,
            cylinder: `
                <ellipse cx="200" cy="60" rx="100" ry="30" class="shape-fill" style="fill: ${themes.cylinder.fill}" />
                <path d="M 100,60 L 100,240 A 100 30 0 0 0 300 240 L 300,60" class="shape-fill" style="fill: ${themes.cylinder.fill}" />
                <ellipse cx="200" cy="60" rx="100" ry="30" class="shape-stroke" style="stroke: ${themes.cylinder.stroke}" />
                <path d="M 100,60 L 100,240 A 100 30 0 0 0 300 240 L 300,60" class="shape-stroke" style="stroke: ${themes.cylinder.stroke}" />
                <path d="M 100,240 A 100 30 0 0 1 300 240" class="shape-stroke shape-dash" style="stroke: ${themes.cylinder.stroke}" />
                <!-- Radius Line -->
                <line x1="200" y1="60" x2="300" y2="60" class="shape-stroke" stroke-width="1.5" style="stroke: ${themes.cylinder.stroke}" />
                <!-- Height Line -->
                <line x1="320" y1="60" x2="320" y2="240" stroke="#9CA3AF" stroke-width="1.5" />
                <line x1="315" y1="60" x2="325" y2="60" stroke="#9CA3AF" />
                <line x1="315" y1="240" x2="325" y2="240" stroke="#9CA3AF" />
            `,
            cone: `
                <!-- Base -->
                <path d="M 100,240 A 100 30 0 0 0 300 240 L 200,40 Z" class="shape-fill" style="fill: ${themes.cone.fill}" />
                <ellipse cx="200" cy="240" rx="100" ry="30" class="shape-stroke shape-dash" fill="none" style="stroke: ${themes.cone.stroke}" />
                <path d="M 100,240 A 100 30 0 0 0 300 240" class="shape-stroke" fill="none" style="stroke: ${themes.cone.stroke}" />
                <!-- Sides -->
                <line x1="100" y1="240" x2="200" y2="40" class="shape-stroke" style="stroke: ${themes.cone.stroke}" />
                <line x1="300" y1="240" x2="200" y2="40" class="shape-stroke" style="stroke: ${themes.cone.stroke}" />
                <!-- H & R Lines -->
                <line x1="200" y1="240" x2="200" y2="40" class="shape-stroke shape-dash" style="stroke: ${themes.cone.stroke}" />
                <line x1="200" y1="240" x2="300" y2="240" class="shape-stroke shape-dash" style="stroke: ${themes.cone.stroke}" />
            `,
            sphere: `
                <circle cx="200" cy="150" r="100" class="shape-fill" style="fill: ${themes.sphere.fill}" />
                <circle cx="200" cy="150" r="100" class="shape-stroke" style="stroke: ${themes.sphere.stroke}" />
                <!-- 3D effect curves -->
                <ellipse cx="200" cy="150" rx="100" ry="30" class="shape-stroke shape-dash" fill="none" style="stroke: ${themes.sphere.stroke}" />
                <line x1="200" y1="150" x2="285" y2="105" class="shape-stroke" style="stroke: ${themes.sphere.stroke}" />
            `
        };

        const titles = {
            triangle: { title: "Right Triangle", desc: "หาด้าน, มุม, พื้นที่" },
            circle: { title: "Circle (วงกลม)", desc: "หาพื้นที่, เส้นรอบวง" },
            cylinder: { title: "Cylinder (ทรงกระบอก)", desc: "หาปริมาตร, พื้นที่ผิว" },
            cone: { title: "Cone (กรวย)", desc: "หาปริมาตร, สูงเอียง" },
            sphere: { title: "Sphere (ทรงกลม)", desc: "หาปริมาตร, พื้นที่ผิว" }
        };

        let currentShape = 'triangle';
        const PI = Math.PI;

        // --- CORE FUNCTIONS ---

        function switchShape(shape) {
            currentShape = shape;
            const theme = themes[shape];
            
            // Update Nav UI with specific borders
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-indigo-50', 'bg-pink-50', 'bg-emerald-50', 'bg-orange-50', 'bg-cyan-50', 'border-b-2');
                btn.style.borderColor = 'transparent';
            });
            
            const activeBtn = document.getElementById(`btn-${shape}`);
            activeBtn.classList.add('active');
            // Add subtle bg color to active nav
            if(shape === 'triangle') activeBtn.classList.add('bg-indigo-50');
            if(shape === 'circle') activeBtn.classList.add('bg-pink-50');
            if(shape === 'cylinder') activeBtn.classList.add('bg-emerald-50');
            if(shape === 'cone') activeBtn.classList.add('bg-orange-50');
            if(shape === 'sphere') activeBtn.classList.add('bg-cyan-50');
            
            activeBtn.style.borderBottomColor = theme.stroke;
            activeBtn.style.borderBottomWidth = '3px';

            // Update Header Color
            const titleEl = document.getElementById('header-title');
            titleEl.className = `text-2xl font-bold transition-colors ${theme.text}`;
            titleEl.innerText = titles[shape].title;
            document.getElementById('header-desc').innerText = titles[shape].desc;

            // Set CSS Variable for Inputs focus color
            document.documentElement.style.setProperty('--theme-color', theme.stroke);

            // Update SVG
            document.getElementById('main-svg').innerHTML = svgs[shape];

            // Toggle Inputs
            document.querySelectorAll('.shape-section').forEach(el => el.classList.remove('active'));
            document.getElementById(`inputs-${shape}`).classList.add('active');

            // Clear Results & Inputs
            resetAll(false); 
            resetAll();
        }

        function resetAll() {
            document.querySelectorAll('input').forEach(input => {
                input.value = '';
                input.classList.remove('has-value');
            });
            document.getElementById('results-area').innerHTML = '<div class="text-center text-gray-400 mt-10 text-sm">กรอกข้อมูลเพื่อเริ่มคำนวณ</div>';
        }

        // --- CALCULATION LOGIC ---

        // Helper: Result Card Template with Number Formatting
        const resCard = (label, value, unit) => {
            const theme = themes[currentShape];
            
            // ตรวจสอบว่า value เป็นตัวเลขหรือไม่
            let displayVal = value;
            if (typeof value === 'number' && !isNaN(value)) {
                displayVal = value.toLocaleString('en-US', {
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 2
                });
            } else if (value === null || value === undefined || isNaN(value)) {
                return ''; // ไม่แสดงการ์ดถ้าค่าไม่ถูกต้อง
            }

            return `
            <div class="result-card flex justify-between items-center border-l-4" style="border-left-color: ${theme.stroke}">
                <span class="text-gray-500 text-sm font-medium">${label}</span>
                <div class="text-right">
                    <div class="text-lg font-bold ${theme.text}">${displayVal}</div>
                    <div class="text-[10px] text-gray-400 uppercase">${unit}</div>
                </div>
            </div>
            `;
        };

        // Helper: Update Input if empty (เติมค่ากลับลงช่องว่าง)
        const updateInputIfEmpty = (id, val) => {
            const el = document.getElementById(id);
            if (el && !el.value && val !== null && !isNaN(val)) {
                el.value = parseFloat(val.toFixed(2));
                el.classList.add('has-value'); // ให้โปร่งแสง
            }
        };

        function calculate() {
            const getVal = (id) => {
                const el = document.getElementById(id);
                if (!el || el.value === '') return null;
                const val = parseFloat(el.value.replace(/,/g, ''));
                return isNaN(val) ? null : val;
            };

            const toRad = d => d * PI / 180;
            const toDeg = r => r * 180 / PI;

            let html = '';

            if (currentShape === 'triangle') {
                let a = getVal('tri-a'), b = getVal('tri-b'), c = getVal('tri-c');
                let A = getVal('tri-A'), B = getVal('tri-B');

                // Logic การคำนวณ (เพิ่มมุม B และกรณีอื่นๆ)
                if (a && b) { 
                    c = Math.sqrt(a*a + b*b); 
                    A = toDeg(Math.atan(a/b)); 
                    B = 90 - A; 
                }
                else if (a && c) { 
                    // ตรวจสอบด้านประกอบต้องน้อยกว่าด้านตรงข้ามมุมฉาก
                    if(c > a) { b = Math.sqrt(c*c - a*a); A = toDeg(Math.asin(a/c)); B = 90 - A; }
                }
                else if (b && c) { 
                    if(c > b) { a = Math.sqrt(c*c - b*b); A = toDeg(Math.acos(b/c)); B = 90 - A; }
                }
                else if (A && a) { B = 90 - A; b = a / Math.tan(toRad(A)); c = a / Math.sin(toRad(A)); }
                else if (A && b) { B = 90 - A; a = b * Math.tan(toRad(A)); c = b / Math.cos(toRad(A)); }
                else if (A && c) { B = 90 - A; a = c * Math.sin(toRad(A)); b = c * Math.cos(toRad(A)); }
                // เพิ่มกรณีมุม B
                else if (B && a) { A = 90 - B; b = a / Math.tan(toRad(A)); c = a / Math.sin(toRad(A)); }
                else if (B && b) { A = 90 - B; a = b * Math.tan(toRad(A)); c = b / Math.cos(toRad(A)); }
                else if (B && c) { A = 90 - B; a = c * Math.sin(toRad(A)); b = c * Math.cos(toRad(A)); }


                if (a && b && c) {
                    const area = 0.5 * a * b;
                    html += resCard('ด้าน a (สูง)', a, 'หน่วย');
                    html += resCard('ด้าน b (ฐาน)', b, 'หน่วย');
                    html += resCard('ด้าน c (ตรงข้าม)', c, 'หน่วย');
                    html += resCard('มุม A', A, 'องศา');
                    html += resCard('มุม B', B, 'องศา');
                    html += resCard('พื้นที่ (Area)', area, 'ตร.หน่วย');

                    // Auto-fill ค่าที่คำนวณได้กลับลงไปในช่อง
                    updateInputIfEmpty('tri-a', a);
                    updateInputIfEmpty('tri-b', b);
                    updateInputIfEmpty('tri-c', c);
                    updateInputIfEmpty('tri-A', A);
                    updateInputIfEmpty('tri-B', B);
                }
            } 
            else if (currentShape === 'circle') {
                const r = getVal('cir-r');
                if (r) {
                    const area = PI * r * r;
                    const circ = 2 * PI * r;
                    html += resCard('พื้นที่ (Area)', area, 'ตร.หน่วย');
                    html += resCard('เส้นรอบวง', circ, 'หน่วย');
                }
            }
            else if (currentShape === 'cylinder') {
                const r = getVal('cyl-r');
                const h = getVal('cyl-h');
                if (r && h) {
                    const vol = PI * r * r * h;
                    const area = (2 * PI * r * h) + (2 * PI * r * r);
                    html += resCard('ปริมาตร (Volume)', vol, 'ลบ.หน่วย');
                    html += resCard('พื้นที่ผิวรวม', area, 'ตร.หน่วย');
                }
            }
            else if (currentShape === 'cone') {
                let r = getVal('cone-r');
                let h = getVal('cone-h');
                let l = getVal('cone-l');

                if (r && h && !l) l = Math.sqrt(r*r + h*h);
                else if (r && l && !h && l > r) h = Math.sqrt(l*l - r*r);
                else if (h && l && !r && l > h) r = Math.sqrt(l*l - h*h);

                if (r && h && l) {
                    const vol = (1/3) * PI * r * r * h;
                    const area = (PI * r * l) + (PI * r * r);
                    html += resCard('ปริมาตร (Volume)', vol, 'ลบ.หน่วย');
                    html += resCard('พื้นที่ผิวรวม', area, 'ตร.หน่วย');
                    html += resCard('สูงเอียง (l)', l, 'หน่วย');
                    html += resCard('ความสูง (h)', h, 'หน่วย');
                    html += resCard('รัศมี (r)', r, 'หน่วย');

                    updateInputIfEmpty('cone-r', r);
                    updateInputIfEmpty('cone-h', h);
                    updateInputIfEmpty('cone-l', l);
                }
            }
            else if (currentShape === 'sphere') {
                const r = getVal('sph-r');
                if (r) {
                    const vol = (4/3) * PI * Math.pow(r, 3);
                    const area = 4 * PI * r * r;
                    html += resCard('ปริมาตร (Volume)', vol, 'ลบ.หน่วย');
                    html += resCard('พื้นที่ผิว', area, 'ตร.หน่วย');
                }
            }

            if (html) {
                document.getElementById('results-area').innerHTML = html;
            }
        }

        // --- EVENT LISTENERS ---
        document.addEventListener('input', (e) => {
            if (e.target.tagName === 'INPUT') {
                // Transparency Effect
                if (e.target.value) e.target.classList.add('has-value');
                else e.target.classList.remove('has-value');
                
                calculate();
            }
        });

        // Initialize first render
        document.getElementById('main-svg').innerHTML = svgs.triangle;
    </script>
</body>
</html>